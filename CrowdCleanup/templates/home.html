<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }

    .container {
      margin-top: 100px;
    }

    h1 {
      font-size: 28px; /* Adjust the font size as needed */
      margin-bottom: 20px;
    }

    .logo {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 100px; /* Adjust the width as needed */
    }

    .button {
      display: inline-block;
      padding: 10px 20px;
      font-size: 18px;
      margin: 0 10px;
      border: 2px solid #000;
      background-color: #f0f0f0;
      text-decoration: none;
      color: #000;
      cursor: pointer;
    }

    .button:hover {
      background-color: #e0e0e0;
    }
  </style>
</head>

<body>
  <div class="container">
    <img src="{% static 'crowdCleanup.jpg' %}" alt="Crowd Cleanup Logo" class="logo" style="width: 300px; height: auto;">
    <h1>What Are You Looking To Do Today?</h1>
    <a href="{% url 'report_litter' %}" class="button">I Want to Report Litter</a>
    <a href="{% url 'clean_litter' %}" class="button" onclick="getZipCode()">I Want to Clean Up Litter</a>
  </div>

  <script>
    function getZipCode() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                fetchZipCode(latitude, longitude);
            });
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    function fetchZipCode(latitude, longitude) {
        var xhr = new XMLHttpRequest();
        var url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`;
        xhr.open('GET', url, true);
        xhr.onload = function() {
            var data = JSON.parse(this.responseText);
            if (data.address && data.address.postcode) {
                var zipCode = data.address.postcode;
                // Redirect to the clean_litter page with the zip code in the URL
                window.location.href = `/clean_litter?zip=${zipCode}`;
            } else {
                alert("Zip code not found.");
            }
        };
        xhr.send();
    }
</script>

</body>

</html>
