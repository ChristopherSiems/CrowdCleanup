<!DOCTYPE html>

<style>
    body {
        margin: 0;
        padding: 0;
        display: flex;
        height: 100vh;
        flex-direction: column;
    }

    header {
        background-color: #333;
        color: white;
        text-align: center;
        padding: 10px;
    }

    .container {
        display: flex;
        flex: 1;
    }

    .half {
        flex: 1;
        overflow: hidden;
    }

    #left-half {
        background-color: #e0e0e0;
    }

    #right-half {
        background-color: #f0f0f0;
    }
</style>

<html lang="en">



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Map with Double Click Marker Drop (No Zoom)</title>
    <!-- Include Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Include Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map {
            height: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Split Layout Example</h1>
    </header>
    <div class="container">
        <div class="half" id="left-half">
            <!-- Content for the left half goes here -->
            <div id="map"></div>
        </div>
        <div class="half" id="right-half">
            <!-- Content for the right half goes here -->
            <h2>Double click on the map to drop a pin!</h2>
            <h2>Write a short description of the litter.</h2>
            
            <input type="text" id="descInput">
    
            <script>
                // Function to handle submission
                function submitDesc() {
                    // Get the value of the input field
                    var description = document.getElementById('descInput').value;
                    
                    // Display description
                    alert(description);
                }
            </script>


            <input type="file" accept="image/*" onchange="previewImage(event)">

            <img id="preview" src="#" alt="Preview" style="max-width: 100%; height: auto;">

            <script>
                var image;
                // Function to preview the selected image
                function previewImage(event) {
                    var input = event.target;
                    var preview = document.getElementById('preview');
                    
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function(e) {
                            preview.src = e.target.result;
                        }
                        reader.readAsDataURL(input.files[0]);
                        image = e.target.result;
                    }
                }
            </script>

            <button onclick="submitDesc()">Submit</button>

        </div>
    </div>
    

    <script>
        // Initialize the map
        var map = L.map('map');

        // Variable to store the last added marker
        var lastMarker = null; 
        var lat = null;
        var long = null;

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Function to handle mouse down event
        function onMouseDown(e) {
            if (e.originalEvent.detail === 2) { // Check if it's a double-click
                // Remove the last added marker, if exists
                if (lastMarker) {
                    map.removeLayer(lastMarker);
                    lat = null;
                    long = null;
                }
                
                // Add a new marker
                lastMarker = L.marker(e.latlng).addTo(map);
                lat = e.lat;
                long = e.long;
            }
        }

        // Function to handle geolocation success
        function onLocationFound(e) {
            var radius = e.accuracy / 2;

            
        }

        // Function to handle geolocation error
        function onLocationError(e) {
            alert(e.message);
        }

        // Attempt to get user's current location
        map.locate({ setView: true, maxZoom: 16 });

        // Bind geolocation events
        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);
        map.on('mousedown', onMouseDown);

        // Disable default Leaflet behavior for double-click
        map.doubleClickZoom.disable();
    </script>
</body>
</html>
